<?xml version="1.0" encoding="UTF-16"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- saved from url=(0016)http://localhost -->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<style type="text/css" id="internalStyle" xmlns="">
		body {
		  font-family: Verdana, Gill, Helvetica, Sans-serif ;
		  font-size: 0.8em;
		  font-weight: 500;
		  color: #000020;
		  background-color: #FFFFFF;
		}
		div.itemDescription {
		  margin-right: 2em;
		  margin-bottom: 2em;
		}
		h1 {
		  font-size: 1.5em;
		  margin-top: 0;
		  margin-bottom: 5px;
		}
		h1.idHeading {
		  color: #008FAF;
		  text-align: center;
		}
		h1.gpHeading {
		  color: black;
		}
		span.idHeading {
		  color: #007799;
		  font-weight: bold;
		}
		.center {
		  text-align: center;
		  margin-top: 5px;
		  margin-bottom: 5px;
		}
		img {
		  width: 210px;
		  border-width: 1px;
		  border-style: outset;
		}
		img.center {
		  text-align: center;
		  display: block;
		  border-color: #666666;
		}
		img.enclosed {
		  width: 60%;
		}
		img.gp {
		  width: auto;
		  border-style: none;
		  margin-top: -1.2em;
		}
		.noThumbnail {
		  color: #888888;
		  font-size: 1.2em;
		  border-width: 1px;
		  border-style: solid;
		  border-color: black;
		  padding: 3em 3em;
		  position: relative;
		  text-align: center;
		  width: 210px;
		  height: 140px;
		}
		.noContent {
		  color: #888888;
		}
		.itemInfo p {
		  margin-top: -0.1em;
		}
		.itemInfo img {
		  width: auto;
		  border: none;
		}
		.gpItemInfo p {
		  margin-top: -1.2em;
		}
		div.box {
		  margin-left: 1em;
		}
		div.hide {
		  display: none;
		}
		div.show {
		  display: block;
		}
		span.hide {
		  display: none;
		}
		span.show {
		  display: inline-block;
		}
		.backToTop a {
		  color: #DDDDDD;
		  font-style: italic;
		  font-size: 0.85em;
		}
		h2 {
		  font-size: 1.2em;
		}
		h2.gp {
		  color: #00709C;
		}
		.gpsubtitle {
		  color: black;
		  font-size: 1.2em;
		  font-weight: normal;
		}
		.gptags {
		  color: black;
		  font-size: 0.8em;
		  font-weight: normal;
		}
		.head {
		  font-size: 1.3em;
		}
		a:link {
		  color: #098EA6;
		  font-weight: normal;
		  text-decoration: none;
		}
		a:visited {
		  color: #098EA6;
		  text-decoration: none;
		}
		a:link:hover, a:visited:hover {
		  color: #007799;
		  background-color: #C6E6EF;
		}
		h2.iso a {
		  color: #007799;
		  font-weight: bold;
		}
		.iso a:link {
		  color: #007799;
		  text-decoration: none;
		}
		.iso a:visited {
		  color: #007799;
		  text-decoration: none;
		}
		.iso a:link:hover, .iso a:visited:hover {
		  color: #006688;
		  background-color: #C6E6EF;
		}
		h2.fgdc a {
		  color: #888888;
		  font-weight: bold;
		}
		.fgdc a:link {
		  color: #888888;
		  text-decoration: none;
		}
		.fgdc a:visited {
		  color: #888888;
		  text-decoration: none;
		}
		.fgdc a:link:hover, .fgdc a:visited:hover {
		  color: #777777;
		  background-color: #C6E6EF;
		}
		h3 {
			font-size: 1em; 
			color: #00709C;
		}
		.backToTop {
		  color: #AAAAAA;
		  margin-left: 1em;
		}
		p.gp {
		  margin-top: .6em;
		  margin-bottom: .6em;
		}
		ul ul {
		  list-style-type: square;
		}
		ul li.iso19139heading {
		  margin-left: -3em;
		  list-style: none;
		  font-weight: bold;
		  color: #666666;
		}
		dl {
		  margin: 0;
		  padding: 0;
		}
		dl.iso {
		  background-color: #F2F9FF;
		}
		dl.esri {
		  background-color: #F2FFF9;
		}
		dl.subtype {
		  width: 40em;
		  margin-top: 0.5em;
		  margin-bottom: 0.5em;
		  padding: 0;
		}
		dt {
		  margin-left: 0.6em;
		  padding-left: 0.6em;
		  clear: left;
		}
		.subtype dt {
		  width: 60%;
		  float: left;
		  margin: 0;
		  padding: 0.5em 0.5em 0 0.75em;
		  border-top: 1px solid #006400;
		  clear: none;
		}
		.subtype dt.header {
		  padding: 0.5em 0.5em 0.5em 0;
		  border-top: none;
		}
		dd {
		  margin-left: 0.6em;
		  padding-left: 0.6em;
		  clear: left;
		}
		.subtype dd {
		  float: left;
		  width: 25%;
		  margin: 0;
		  padding: 0.5em 0.5em 0 0.75em;
		  border-top: 1px solid #006400;
		  clear: none;
		}
		.subtype dd.header {
		  padding: 0.5em 0.5em 0.5em 0;
		  border-top: none;
		}
		.isoElement {
		  font-variant: small-caps;
		  font-size: 0.9em;
		  font-weight: normal;
		  color: #006688;
		}
		.esriElement {
		  font-variant: small-caps;
		  font-size: 0.9em;
		  font-weight: normal;
		  color: #006688;
		}
		.element {
		  font-variant: small-caps;
		  font-size: 0.9em;
		  font-weight: normal;
		  color: #666666;
		}
		unknownElement {
		  font-variant: small-caps;
		  font-size: 0.9em;
		  font-weight: normal;
		  color: #333333;
		}
		.sync {
		  color: #006400;
		  font-weight: bold;
		  font-size: 0.9em;
		}
		.syncOld {
		  color: #888888;
		  font-weight: bold;
		  font-size: 0.9em;
		}
		.textOld {
		  color: #999999;
		}
		.code {
		  font-family: monospace;
		}
		pre.wrap {
		  width: 96%;
		  font-family: Verdana, Gill, Helvetica, Sans-serif ;
		  font-size: 1em;
		  margin: 0 0 1em 0.6em;
		  white-space: pre-wrap;       /* css-3 */
		  white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
		  white-space: -pre-wrap;      /* Opera 4-6 */
		  white-space: -o-pre-wrap;    /* Opera 7 */
		  word-wrap: break-word;       /* Internet Explorer 5.5+ */
		}
		pre.gp {
		  font-family: Courier New, Courier, monospace;
		  line-height: 1.2em;
		}
		.gpcode {
		  margin-left:15px;
		  border: 1px dashed #ACC6D8;
		  padding: 10px;
		  background-color:#EEEEEE;
		  height: auto;
		  overflow: scroll; 
		  width: 96%;
		}
		tr {
		  vertical-align: top;
		}
		th {
		  text-align: left;
		  background: #dddddd;
		  vertical-align: bottom;
		  font-size: 0.8em;
		}
		td {
		  background: #EEEEEE;
		  color: black;
		  vertical-align: top;
		  font-size: 0.8em;
		}
		td.description {
		  background: white;
		}
	  </style>
</head>
<body oncontextmenu="return true">
<h1 class="gpHeading" xmlns="">DRI-HOP</h1>
<h2 class="gp" xmlns="">Title 
		<span class="gpsubtitle">DRI-HOP</span>
</h2>
<h2 class="gp" xmlns="">Summary</h2>
<div class="gpItemInfo" xmlns="">
<p><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN STYLE="font-weight:bold;">D</SPAN><SPAN>irect </SPAN><SPAN STYLE="font-weight:bold;">R</SPAN><SPAN>elief </SPAN><SPAN STYLE="font-weight:bold;">I</SPAN><SPAN>ntegration for </SPAN><SPAN STYLE="font-weight:bold;">H</SPAN><SPAN>igher </SPAN><SPAN STYLE="font-weight:bold;">O</SPAN><SPAN>ptical </SPAN><SPAN STYLE="font-weight:bold;">P</SPAN><SPAN>erformance </SPAN></P><P><SPAN>=======</SPAN></P><P><SPAN>Combine shaded relief with colored thematic polygons without reducing the color gamut (which is what happens when using the Display Transparency facility in ArcMap Layer Properties). </SPAN></P><P><SPAN>Makes a geo-registered .PNG file that may be added to your map composition in lieu of semi-transparent polygon colors and underlying shaded relief image. Image has same spatial reference framework as input hillshade. </SPAN></P><P><SPAN>For input GeMS database named XYZ.gdb, output image will be named XYZ_rgbcomposite.png. Any existing file (and associated .pgw, .png.xml, .png.aux.xml, and .png.ovr files) with this name will be overwritten. Output is written to the directory that hosts the input GeMS database. Script also creates (and overwrites any existing) xxxscratch.gdb in this directory. </SPAN></P><P><SPAN>=======</SPAN></P><P><SPAN>Run this script at least twice! First time, leave "Assay hillshade" checked, &lt;OK&gt;, and look at output to see the characteristics of your input hillshade. </SPAN></P><P><SPAN>Then adjust </SPAN><SPAN>stretch</SPAN><SPAN>, </SPAN><SPAN>new mean</SPAN><SPAN>, </SPAN><SPAN>floor</SPAN><SPAN>, and </SPAN><SPAN>cell size </SPAN><SPAN>as indicated, and re-run with "Assay hillshade" unchecked to create an output image. Expect to do this several times: set cell-size-multiplier to &gt;&gt;1 for faster trials, then return it to 1 for final output. </SPAN></P><P><SPAN>=======</SPAN></P><P><SPAN>When you integrate the resulting image into your ArcMap composition, expect to adjust its symbology. ArcMap defaults to a "Percent Clip" stretch type and a Gamma Stretch and may not want either. In ArcMap, in your map's Table of Contents, double-click on the layer that is your calculated image to bring up its Layer Properties window. Select the </SPAN><SPAN STYLE="font-weight:bold;">Symbology </SPAN><SPAN>tab. Part-way down, under </SPAN><SPAN STYLE="font-weight:bold;">Stretch</SPAN><SPAN>, set </SPAN><SPAN STYLE="font-weight:bold;">Type: </SPAN><SPAN>to </SPAN><SPAN STYLE="font-weight:bold;">None </SPAN><SPAN>and uncheck </SPAN><SPAN STYLE="font-weight:bold;">Apply Gamma Stretch</SPAN><SPAN>: You may find that without a gamma stretch the image shows up as black. In that case, experiment. Gamma stretch should be the same for all 3 channels. </SPAN></P><P><SPAN /></P></DIV></DIV></DIV></p><br />
</div>
<h2 class="gp" xmlns="">Usage</h2>
<div class="gpItemInfo" xmlns="">
<p><span class="noContent">There is no usage for this tool.</span></p>
</div>
<h2 class="gp" xmlns="">Syntax</h2>
<div xmlns="">
<p style="margin-top: -1.2em">DRI-HOP (hillshade, GeMS_database, Assay_hillshade, stretch, new_mean, floor, cell_size_multiplier, Force_failure) <br /><br />
</p>
<table width="100%" border="0" cellpadding="5">
<tbody>
<tr>
<th width="30%">
<b>Parameter</b>
</th>
<th width="50%">
<b>Explanation</b>
</th>
<th width="20%">
<b>Data Type</b>
</th>
</tr>
<tr>
<td class="info">hillshade</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>Hillshade to be integrated with colored MapUnitPolys layer. </SPAN></P><P><SPAN>Recommendations: </SPAN></P><OL><LI><P><SPAN>Make hillshade with illumination from the northern hemisphere. That is, azimuth = 315 (NW), 45 (NE), or similar. Illumination from the south makes an image that looks inverted to most people.</SPAN></P></LI><LI><P><SPAN>For most topography, illuminate with light source 45 degrees above the horizon. Don't vertically exaggerate, or reduce illumination angle. If you need more definition, increase stretch and modify new mean and floor values, below. </SPAN></P></LI><LI><P><SPAN>Make hillshade with an appropriate cell size. Too-small cells = long processing time, large output file, and sparkly images. Cells should be roughly 0.1 mm at page scale: for a 1:24,000 scale map, this is 2.4 m (8 ft). </SPAN><SPAN STYLE="font-style:italic;">Factor-of-two variation from this rule won't hurt. Cells that are 5 times larger, or smaller, are a bad idea</SPAN><SPAN>. </SPAN></P></LI></OL></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Raster Dataset</td>
</tr>
<tr>
<td class="info">GeMS_database</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>Source of colored unit polygons to be integrated with hillshade.</SPAN></P><P><SPAN>Script assumes there is a polygon feature class </SPAN><SPAN STYLE="font-style:italic;">&lt;geodatabase&gt;</SPAN><SPAN>/GeologicMap/MapUnitPolys with attribute MapUnit.</SPAN></P><P><SPAN>Script assumes there is a table </SPAN><SPAN STYLE="font-style:italic;">&lt;geodatabase&gt;</SPAN><SPAN>/DescriptionOfMapUnits with attributes MapUnit and Symbol, and that the values in Symbol refer to the color identifiers in the WPGCMYK shadeset (available in USGS Symbols.style in your ArcGIS installation). </SPAN></P><P><SPAN>If table </SPAN><SPAN STYLE="font-style:italic;">&lt;geodatabase&gt;</SPAN><SPAN>/DescriptionOfMapUnits has a ValBump attribute (integer, range -20 + 40 or so), these values will be used to offset the lightness (+ValBump = lighter color) of the final image for the appropriate map units. </SPAN></P><P><SPAN STYLE="font-style:italic;">Script could be rewritten to find color information elsewhere, but that is a project for another day. </SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Workspace</td>
</tr>
<tr>
<td class="info">Assay_hillshade</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>If checked, prints mean, standard deviation, and cell size of the input hillshade. </SPAN></P><P><SPAN>Run DRIHOP with this checked, look at the results, and then run again with the box unchecked (and perhaps with adjustments to the stretch, new mean, floor and cell size multiplier parameters) to produce an output image. </SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Boolean</td>
</tr>
<tr>
<td class="info">stretch</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><P><SPAN>How much the hillshade is stretched.  Use a big number to turn the Georgia piedmont into the Swiss Alps. A small number to make the North Cascades look like Iowa. </SPAN></P><P><SPAN>In general, it is appropriate to have +/- 1 standard deviation, stretched, fit into the range 255 - floor. Restated,</SPAN></P><P STYLE="text-indent:20;"><SPAN STYLE="font-size:14pt">2  x  StdDev  x  stretch  =  255  -  floor</SPAN></P><P><SPAN>A value of about 0.5 is a reasonable starting point.  Adjust to taste. </SPAN></P></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Double</td>
</tr>
<tr>
<td class="info">new_mean</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>The stretched hillshade will be shifted to have its mean at this value. Must be greater than or equal to 0, less than or equal to 255, and integer. Generally, a value less than 255 and greater than the mean of the input hillshade is best. Start with a value of 225 or 230, and adjust to taste.</SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Long</td>
</tr>
<tr>
<td class="info">floor</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>Minimum value of new stretched and shifted hillshade. Values less than this are reset to this value. Must be greater than or equal to 0, less than or equal to 255, and integer. Start with 200 or 220, and adjust to taste. </SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Long</td>
</tr>
<tr>
<td class="info">cell_size_multiplier</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>Subsample your hillshade. Recommend using a value &gt; 1 (6? 8?) while trying values for stretch, new mean, and floor, as this will reduce computation time. Then reset to 1 for calculating a final, higher-resolution, image. </SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Double</td>
</tr>
<tr>
<td class="info">Force_failure</td>
<td class="info" align="left">
<span style="font-weight: bold">Dialog Reference</span><br /><DIV STYLE="text-align:Left;"><DIV><DIV><P><SPAN>When checked, script prints a message that all is OK and exits as if it had failed, which preserves all the input values set above. Doesn't mean anything went wrong!</SPAN></P><P><SPAN STYLE="font-style:italic;">(If something does go wrong you will get a red failure message that is not preceded by a statement that all is OK.)</SPAN></P></DIV></DIV></DIV><p><span class="noContent">There is no python reference for this parameter.</span></p></td>
<td class="info" align="left">Boolean</td>
</tr>
</tbody>
</table>
</div>
<h2 class="gp" xmlns="">Code Samples</h2>
<div class="gpItemInfo" xmlns="">
<p><span class="noContent">There are no code samples for this tool.</span></p>
</div>
<h2 class="gp" xmlns="">Tags</h2>
<div class="gpItemInfo" xmlns="">
<p>geology, geologic map, cartography, GeMS, hillshade, color shaded relief</p>
</div>
<h2 class="gp" xmlns="">Credits</h2>
<div class="gpItemInfo" xmlns="">
<p><span class="noContent">There are no credits for this item.</span></p>
</div>
<h2 class="gp" xmlns="">Use limitations</h2>
<div class="gpItemInfo" xmlns="">
<p><span class="noContent">There are no use limitations for this item.</span></p>
</div>
</body>
</html>
